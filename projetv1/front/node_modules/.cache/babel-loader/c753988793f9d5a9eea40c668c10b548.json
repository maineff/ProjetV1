{"ast":null,"code":"var _jsxFileName = \"/Users/juliette/OneDrive - Groupe INSEEC (POCE)/ING 4/techno web/ProjetV1/projetv1/src/component/Chart1.js\";\nimport \"../App.css\";\nimport * as React from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst data = {\n  labels: [],\n  datasets: [{\n    label: \"en millions d'euros\",\n    data: [],\n    borderColor: \"white\"\n  }]\n};\nlet annee = [];\nlet entrees_millions = [];\n\nclass Chart1 extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      loading: true,\n      info: null,\n      info2: null\n    };\n  }\n\n  async componentDidMount() {\n    const url = \"https://data.culture.gouv.fr//api/records/1.0/search/?dataset=frequentation-dans-les-salles-de-cinema&q=&facet=annee\";\n\n    for (let i = 2015; i < 2021; i++) {\n      const response = await fetch(url + \"&refine.annee=\" + i);\n      const data = await response.json();\n      this.setState({\n        info: data.records[0],\n        loading: false\n      });\n      annee.push(this.state.info.fields.annee);\n      entrees_millions.push(this.state.info.fields.entrees_millions);\n    }\n  }\n\n  param() {\n    for (let i = 0; i < 6; i++) {\n      data.datasets[0].data[i] = entrees_millions[i];\n      data.labels[i] = annee[i];\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!this.state.info) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"ERREUR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 14\n      }, this);\n    }\n\n    this.param();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"graphcard\",\n      children: [\"Nombre d'entr\\xE9es\", /*#__PURE__*/_jsxDEV(Line, {\n        className: \"bar\",\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Chart1;","map":{"version":3,"sources":["/Users/juliette/OneDrive - Groupe INSEEC (POCE)/ING 4/techno web/ProjetV1/projetv1/src/component/Chart1.js"],"names":["React","Line","data","labels","datasets","label","borderColor","annee","entrees_millions","Chart1","Component","state","loading","info","info2","componentDidMount","url","i","response","fetch","json","setState","records","push","fields","param","render"],"mappings":";AAAA,OAAO,YAAP;AAEA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,IAAT,QAAqB,iBAArB;;AAGA,MAAMC,IAAI,GAAG;AACXC,EAAAA,MAAM,EAAE,EADG;AAEXC,EAAAA,QAAQ,EAAE,CACR;AACEC,IAAAA,KAAK,EAAE,qBADT;AAEEH,IAAAA,IAAI,EAAE,EAFR;AAGEI,IAAAA,WAAW,EAAE;AAHf,GADQ;AAFC,CAAb;AAWA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAIC,gBAAgB,GAAG,EAAvB;;AAEA,MAAMC,MAAN,SAAqBT,KAAK,CAACU,SAA3B,CAAqC;AAAA;AAAA;AAAA,SACnCC,KADmC,GAC3B;AACNC,MAAAA,OAAO,EAAE,IADH;AAENC,MAAAA,IAAI,EAAE,IAFA;AAGNC,MAAAA,KAAK,EAAE;AAHD,KAD2B;AAAA;;AAOZ,QAAjBC,iBAAiB,GAAG;AACxB,UAAMC,GAAG,GACP,sHADF;;AAEA,SAAK,IAAIC,CAAC,GAAG,IAAb,EAAmBA,CAAC,GAAG,IAAvB,EAA6BA,CAAC,EAA9B,EAAkC;AAChC,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,GAAG,gBAAN,GAAyBC,CAA1B,CAA5B;AACA,YAAMf,IAAI,GAAG,MAAMgB,QAAQ,CAACE,IAAT,EAAnB;AACA,WAAKC,QAAL,CAAc;AAAER,QAAAA,IAAI,EAAEX,IAAI,CAACoB,OAAL,CAAa,CAAb,CAAR;AAAyBV,QAAAA,OAAO,EAAE;AAAlC,OAAd;AACAL,MAAAA,KAAK,CAACgB,IAAN,CAAW,KAAKZ,KAAL,CAAWE,IAAX,CAAgBW,MAAhB,CAAuBjB,KAAlC;AACAC,MAAAA,gBAAgB,CAACe,IAAjB,CAAsB,KAAKZ,KAAL,CAAWE,IAAX,CAAgBW,MAAhB,CAAuBhB,gBAA7C;AACD;AACF;;AAEDiB,EAAAA,KAAK,GAAG;AACN,SAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1Bf,MAAAA,IAAI,CAACE,QAAL,CAAc,CAAd,EAAiBF,IAAjB,CAAsBe,CAAtB,IAA2BT,gBAAgB,CAACS,CAAD,CAA3C;AACAf,MAAAA,IAAI,CAACC,MAAL,CAAYc,CAAZ,IAAiBV,KAAK,CAACU,CAAD,CAAtB;AACD;AACF;;AAEDS,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKf,KAAL,CAAWC,OAAf,EAAwB;AACtB,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AAED,QAAI,CAAC,KAAKD,KAAL,CAAWE,IAAhB,EAAsB;AACpB,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACD;;AACD,SAAKY,KAAL;AAGA,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,qDAEA,QAAC,IAAD;AAAM,QAAA,SAAS,EAAC,KAAhB;AAAsB,QAAA,IAAI,EAAEvB;AAA5B;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAaD;;AAlDkC;;AAqDrC,eAAeO,MAAf","sourcesContent":["import \"../App.css\";\n\nimport * as React from \"react\";\nimport { Line } from \"react-chartjs-2\";\n\n\nconst data = {\n  labels: [],\n  datasets: [\n    {\n      label: \"en millions d'euros\",\n      data: [],\n      borderColor: \"white\",\n    },\n  ],\n};\n\nlet annee = [];\nlet entrees_millions = [];\n\nclass Chart1 extends React.Component {\n  state = {\n    loading: true,\n    info: null,\n    info2: null,\n  };\n\n  async componentDidMount() {\n    const url =\n      \"https://data.culture.gouv.fr//api/records/1.0/search/?dataset=frequentation-dans-les-salles-de-cinema&q=&facet=annee\";\n    for (let i = 2015; i < 2021; i++) {\n      const response = await fetch(url + \"&refine.annee=\" + i);\n      const data = await response.json();\n      this.setState({ info: data.records[0], loading: false });\n      annee.push(this.state.info.fields.annee);\n      entrees_millions.push(this.state.info.fields.entrees_millions);\n    }\n  }\n\n  param() {\n    for (let i = 0; i < 6; i++) {\n      data.datasets[0].data[i] = entrees_millions[i];\n      data.labels[i] = annee[i];\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return <div>loading...</div>;\n    }\n\n    if (!this.state.info) {\n      return <div>ERREUR</div>;\n    }\n    this.param();\n\n\n    return (\n        <div className=\"graphcard\">\n        Nombre d'entr√©es\n        <Line className=\"bar\" data={data} />\n        {/* a voir si c'est utile\n      <iframe\n        src=\"https://data.culture.gouv.fr/chart/embed/?dataChart=eyJxdWVyaWVzIjpbeyJjaGFydHMiOlt7InR5cGUiOiJsaW5lIiwiZnVuYyI6IlNVTSIsInlBeGlzIjoiZW50cmVlc19taWxsaW9ucyIsInNjaWVudGlmaWNEaXNwbGF5Ijp0cnVlLCJjb2xvciI6IiMwMDAwODAifV0sInhBeGlzIjoiYW5uZWUiLCJtYXhwb2ludHMiOjUwLCJzb3J0IjoiIiwiY29uZmlnIjp7ImRhdGFzZXQiOiJmcmVxdWVudGF0aW9uLWRhbnMtbGVzLXNhbGxlcy1kZS1jaW5lbWEiLCJvcHRpb25zIjp7ImRpc2p1bmN0aXZlLmFubmVlIjp0cnVlfX19XSwidGltZXNjYWxlIjoiIiwiZGlzcGxheUxlZ2VuZCI6dHJ1ZSwiYWxpZ25Nb250aCI6dHJ1ZX0%3D&static=false&datasetcard=false\"\n        width=\"400\"\n        height=\"300\"\n        frameborder=\"0\"\n      ></iframe>*/}\n      </div>\n    );\n  }\n}\n\nexport default Chart1;\n"]},"metadata":{},"sourceType":"module"}