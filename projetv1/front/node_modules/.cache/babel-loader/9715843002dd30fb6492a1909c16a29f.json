{"ast":null,"code":"var _jsxFileName = \"/Users/juliette/OneDrive - Groupe INSEEC (POCE)/ING 4/techno web/ProjetV1/projetv1/front/src/pages/Admin/Admin.js\";\nimport \"../../App.css\";\nimport Sidebar from \"../../component/Sidebar/Sidebar\";\nimport \"./Admin.css\"; // reactstrap components\n\nimport Grid from \"@mui/material/Grid\";\nimport * as React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport axios from \"axios\";\nimport { Input } from \"@mui/material\";\nimport { Button } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet films = [];\nlet filmActuel = []; //page admin pour gerer les API\n\nclass Admin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      titre: \"\",\n      description: \"\",\n      date: \"\",\n      popularite: \"\",\n      origine: \"\"\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.delete = this.delete.bind(this);\n    this.update = this.update.bind(this);\n  }\n\n  handleClick(e) {\n    e.preventDefault();\n    let databody = {\n      titre: this.state.titre,\n      description: this.state.description,\n      date: this.state.date,\n      popularite: this.state.popularite,\n      origine: this.state.origine\n    };\n    console.log(JSON.stringify(databody));\n    fetch(\"http://localhost:5000\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(databody)\n    }).then(res => res.json()).then(data => console.log(data)).then(() => alert(\"Le film a bien été ajouté !\"));\n    console.log(databody, \"databody\");\n  }\n\n  delete(e) {\n    e.preventDefault();\n    let databody = {\n      titre: this.state.titre,\n      description: this.state.description,\n      date: this.state.date,\n      popularite: this.state.popularite,\n      origine: this.state.origine\n    };\n\n    fetch = async () => {\n      try {\n        const {\n          data: film\n        } = await axios.get(\"http://localhost:5000\");\n        films = film;\n        filmActuel = films.find(unFilm => unFilm.titre === databody.titre);\n        axios.delete(`http://localhost:5000/${filmActuel._id}`);\n        alert(\"Le film a bien été ajouté !\");\n      } catch (err) {\n        alert(err);\n      }\n    };\n\n    fetch();\n  }\n\n  update(e) {\n    e.preventDefault();\n    let databody = {\n      titre: this.state.titre,\n      description: this.state.description,\n      date: this.state.date,\n      popularite: this.state.popularite,\n      origine: this.state.origine\n    };\n\n    fetch = async () => {\n      try {\n        const {\n          data: film\n        } = await axios.get(\"http://localhost:5000\");\n        films = film;\n        filmActuel = films.find(unFilm => unFilm.titre === databody.titre);\n        axios({\n          method: \"patch\",\n          url: `http://localhost:5000/${filmActuel._id}`,\n          withCredentials: true,\n          data: {\n            titre: this.state.titre,\n            description: this.state.description,\n            date: this.state.date,\n            popularite: this.state.popularite,\n            origine: this.state.origine\n          }\n        }).then(alert(\"bien modif\"));\n      } catch (err) {\n        alert(err);\n      }\n    };\n\n    fetch();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      className: \"body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          component: \"main\",\n          sx: {\n            flexGrow: 1,\n            bgcolor: \"#212427\",\n            p: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 5,\n            className: \"firstcard\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: \"Gerer les API\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Titre: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"input\",\n                type: \"text\",\n                name: \"titre\",\n                value: this.state.titre,\n                onChange: e => this.setState({\n                  titre: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Descrition:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"input\",\n                name: \"description\",\n                type: \"text\",\n                value: this.state.description,\n                onChange: e => this.setState({\n                  description: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Date de sortie du film: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"input\",\n                name: \"date\",\n                type: \"text\",\n                value: this.state.date,\n                onChange: e => this.setState({\n                  date: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Popularite du film: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"input\",\n                name: \"popularite\",\n                type: \"text\",\n                value: this.state.popularite,\n                onChange: e => this.setState({\n                  popularite: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Origine: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                className: \"input\",\n                name: \"origine\",\n                type: \"text\",\n                value: this.state.origine,\n                onChange: e => this.setState({\n                  origine: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"buton\",\n                onClick: this.handleClick,\n                children: \"AJOUTER\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"buton\",\n                onClick: this.update,\n                children: \"UPDATE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: \"buton\",\n                onClick: this.delete,\n                children: \"SUPPRIMER\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Admin;","map":{"version":3,"sources":["/Users/juliette/OneDrive - Groupe INSEEC (POCE)/ING 4/techno web/ProjetV1/projetv1/front/src/pages/Admin/Admin.js"],"names":["Sidebar","Grid","React","Box","axios","Input","Button","films","filmActuel","Admin","Component","constructor","props","state","titre","description","date","popularite","origine","handleClick","bind","delete","update","e","preventDefault","databody","console","log","JSON","stringify","fetch","method","headers","body","then","res","json","data","alert","film","get","find","unFilm","_id","err","url","withCredentials","render","flexGrow","bgcolor","p","setState","target","value"],"mappings":"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","sourcesContent":["import \"../../App.css\";\nimport Sidebar from \"../../component/Sidebar/Sidebar\";\nimport \"./Admin.css\";\n\n// reactstrap components\nimport Grid from \"@mui/material/Grid\";\nimport * as React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport axios from \"axios\";\n\nimport { Input } from \"@mui/material\";\nimport { Button } from \"@mui/material\";\n\nlet films = [];\nlet filmActuel = [];\n\n//page admin pour gerer les API\nclass Admin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      titre: \"\",\n      description: \"\",\n      date: \"\",\n      popularite: \"\",\n      origine: \"\",\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.delete = this.delete.bind(this);\n    this.update = this.update.bind(this);\n  }\n\n  handleClick(e) {\n    e.preventDefault();\n    let databody = {\n      titre: this.state.titre,\n      description: this.state.description,\n      date: this.state.date,\n      popularite: this.state.popularite,\n      origine: this.state.origine,\n    };\n\n    console.log(JSON.stringify(databody));\n\n    fetch(\"http://localhost:5000\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(databody),\n    })\n      .then((res) => res.json())\n      .then((data) => console.log(data))\n      .then(() => alert(\"Le film a bien été ajouté !\"));\n    console.log(databody, \"databody\");\n  }\n\n  delete(e) {\n    e.preventDefault();\n    let databody = {\n      titre: this.state.titre,\n      description: this.state.description,\n      date: this.state.date,\n      popularite: this.state.popularite,\n      origine: this.state.origine,\n    };\n    fetch = async () => {\n      try {\n        const { data: film } = await axios.get(\"http://localhost:5000\");\n        films = film;\n\n        filmActuel = films.find((unFilm) => unFilm.titre === databody.titre);\n        axios.delete(`http://localhost:5000/${filmActuel._id}`);\n        alert(\"Le film a bien été ajouté !\")\n      } catch (err) {\n        alert(err);\n      }\n    };\n    fetch();\n  }\n  update(e) {\n    e.preventDefault();\n    let databody = {\n      titre: this.state.titre,\n      description: this.state.description,\n      date: this.state.date,\n      popularite: this.state.popularite,\n      origine: this.state.origine,\n    };\n    fetch = async () => {\n      try {\n        const { data: film } = await axios.get(\"http://localhost:5000\");\n        films = film;\n        filmActuel = films.find((unFilm) => unFilm.titre === databody.titre);\n        axios({\n          method: \"patch\",\n          url: `http://localhost:5000/${filmActuel._id}`,\n          withCredentials: true,\n          data: {\n            titre: this.state.titre,\n            description: this.state.description,\n            date: this.state.date,\n            popularite: this.state.popularite,\n            origine: this.state.origine,\n          },\n        }).then(alert(\"bien modif\"));\n      } catch (err) {\n        alert(err);\n      }\n    };\n    fetch();\n  }\n\n  render() {\n    return (\n      <Box className=\"body\">\n        <div className=\"container\">\n          <Sidebar />\n\n          <Box component=\"main\" sx={{ flexGrow: 1, bgcolor: \"#212427\", p: 3 }}>\n            <Grid container spacing={5} className=\"firstcard\">\n              <Grid item xs={12}>\n                <center>\n                  <h1>Gerer les API</h1>\n                </center>\n                <label>Titre: </label>\n                <Input\n                  className=\"input\"\n                  type=\"text\"\n                  name=\"titre\"\n                  value={this.state.titre}\n                  onChange={(e) => this.setState({ titre: e.target.value })}\n                ></Input>\n              </Grid>\n              <Grid item xs={12}>\n                <label>Descrition:</label>\n                <Input\n                  className=\"input\"\n                  name=\"description\"\n                  type=\"text\"\n                  value={this.state.description}\n                  onChange={(e) =>\n                    this.setState({ description: e.target.value })\n                  }\n                ></Input>\n              </Grid>\n              <Grid item xs={12}>\n                <label>Date de sortie du film: </label>\n                <Input\n                  className=\"input\"\n                  name=\"date\"\n                  type=\"text\"\n                  value={this.state.date}\n                  onChange={(e) => this.setState({ date: e.target.value })}\n                ></Input>\n              </Grid>\n              <Grid item xs={12}>\n                <label>Popularite du film: </label>\n                <Input\n                  className=\"input\"\n                  name=\"popularite\"\n                  type=\"text\"\n                  value={this.state.popularite}\n                  onChange={(e) =>\n                    this.setState({ popularite: e.target.value })\n                  }\n                ></Input>\n              </Grid>\n              <Grid item xs={12}>\n                <label>Origine: </label>\n                <Input\n                  className=\"input\"\n                  name=\"origine\"\n                  type=\"text\"\n                  value={this.state.origine}\n                  onChange={(e) => this.setState({ origine: e.target.value })}\n                ></Input>\n              </Grid>\n              <Grid item xs={4}>\n                <Button className=\"buton\" onClick={this.handleClick}>\n                  AJOUTER\n                </Button>\n              </Grid>\n              <Grid item xs={4}>\n                <Button className=\"buton\" onClick={this.update}>\n                  UPDATE\n                </Button>\n              </Grid>\n              <Grid item xs={4}>\n                <Button className=\"buton\" onClick={this.delete}>\n                  SUPPRIMER\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        </div>\n      </Box>\n    );\n  }\n}\n\nexport default Admin;"]},"metadata":{},"sourceType":"module"}