{"ast":null,"code":"var _jsxFileName = \"/Users/juliette/OneDrive - Groupe INSEEC (POCE)/ING 4/techno web/ProjetV1/projetv1/src/component/Chart1.js\";\nimport \"../App.css\";\nimport * as React from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst data = {\n  labels: [],\n  datasets: [{\n    label: \"en millions d'euros\",\n    data: [],\n    borderColor: \"white\"\n  }]\n};\nlet annee = [];\nlet entrees_millions = [];\n\nclass Chart1 extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      loading: true,\n      info: null\n    };\n  }\n\n  async componentDidMount() {\n    const url = \"https://data.culture.gouv.fr//api/records/1.0/search/?dataset=frequentation-dans-les-salles-de-cinema&q=&facet=annee\";\n\n    for (let i = 2015; i < 2021; i++) {\n      const response = await fetch(url + \"&refine.annee=\" + i);\n      const data = await response.json();\n      this.setState({\n        info: data.records[0],\n        loading: false\n      });\n      annee.push(this.state.info.fields.annee);\n      entrees_millions.push(this.state.info.fields.entrees_millions);\n    }\n\n    const url2 = \"https://data.culture.gouv.fr/api/records/1.0/search/?dataset=etablissements-cinematographiques&q=&facet=region_administrative&facet=genre&facet=multiplexe&facet=zone_de_la_commune&refine.region_administrative=\";\n\n    for (let i = 0; i <= villes.length; i++) {\n      const response = await fetch(url2 + villes[i]);\n      const dataBaton = await response.json();\n      this.setState({\n        info2: dataBaton,\n        loading: false\n      });\n      cinemas.push(this.state.info2.nhits);\n    }\n  }\n\n  param() {\n    for (let i = 0; i < 6; i++) {\n      data.datasets[0].data[i] = entrees_millions[i];\n      data.labels[i] = annee[i];\n    }\n  }\n\n  paramBaton() {\n    for (let i = 0; i <= villes.length; i++) {\n      dataBaton.datasets[0].data[i] = cinemas[i];\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!this.state.info) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"ERREUR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 14\n      }, this);\n    }\n\n    this.param();\n    this.paramBaton();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"graphcard\",\n      children: [\"Nombre d'entr\\xE9es\", /*#__PURE__*/_jsxDEV(Line, {\n        className: \"bar\",\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Chart1;","map":{"version":3,"sources":["/Users/juliette/OneDrive - Groupe INSEEC (POCE)/ING 4/techno web/ProjetV1/projetv1/src/component/Chart1.js"],"names":["React","Line","data","labels","datasets","label","borderColor","annee","entrees_millions","Chart1","Component","state","loading","info","componentDidMount","url","i","response","fetch","json","setState","records","push","fields","url2","villes","length","dataBaton","info2","cinemas","nhits","param","paramBaton","render"],"mappings":"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","sourcesContent":["import \"../App.css\";\n\nimport * as React from \"react\";\nimport { Line } from \"react-chartjs-2\";\n\n\n\nconst data = {\n  labels: [],\n  datasets: [\n    {\n      label: \"en millions d'euros\",\n      data: [],\n      borderColor: \"white\",\n    },\n  ],\n};\n\n \n\nlet annee = [];\nlet entrees_millions = [];\n\n\nclass Chart1 extends React.Component {\n  state = {\n    loading: true,\n    info: null,\n\n  };\n\n  async componentDidMount() {\n    const url =\n      \"https://data.culture.gouv.fr//api/records/1.0/search/?dataset=frequentation-dans-les-salles-de-cinema&q=&facet=annee\";\n    for (let i = 2015; i < 2021; i++) {\n      const response = await fetch(url + \"&refine.annee=\" + i);\n      const data = await response.json();\n      this.setState({ info: data.records[0], loading: false });\n      annee.push(this.state.info.fields.annee);\n      entrees_millions.push(this.state.info.fields.entrees_millions);\n    }\n    const url2 =\n      \"https://data.culture.gouv.fr/api/records/1.0/search/?dataset=etablissements-cinematographiques&q=&facet=region_administrative&facet=genre&facet=multiplexe&facet=zone_de_la_commune&refine.region_administrative=\";\n\n    for (let i = 0; i <= villes.length; i++) {\n      const response = await fetch(url2 + villes[i]);\n      const dataBaton = await response.json();\n      this.setState({ info2: dataBaton, loading: false });\n      cinemas.push(this.state.info2.nhits);\n    }\n  }\n\n  param() {\n    for (let i = 0; i < 6; i++) {\n      data.datasets[0].data[i] = entrees_millions[i];\n      data.labels[i] = annee[i];\n    }\n  }\n  paramBaton() {\n    for (let i = 0; i <= villes.length; i++) {\n      dataBaton.datasets[0].data[i] = cinemas[i];\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return <div>loading...</div>;\n    }\n\n    if (!this.state.info) {\n      return <div>ERREUR</div>;\n    }\n    this.param();\n    this.paramBaton();\n\n    return (\n        <div className=\"graphcard\">\n        Nombre d'entr√©es\n        <Line className=\"bar\" data={data} />\n        {/* a voir si c'est utile\n      <iframe\n        src=\"https://data.culture.gouv.fr/chart/embed/?dataChart=eyJxdWVyaWVzIjpbeyJjaGFydHMiOlt7InR5cGUiOiJsaW5lIiwiZnVuYyI6IlNVTSIsInlBeGlzIjoiZW50cmVlc19taWxsaW9ucyIsInNjaWVudGlmaWNEaXNwbGF5Ijp0cnVlLCJjb2xvciI6IiMwMDAwODAifV0sInhBeGlzIjoiYW5uZWUiLCJtYXhwb2ludHMiOjUwLCJzb3J0IjoiIiwiY29uZmlnIjp7ImRhdGFzZXQiOiJmcmVxdWVudGF0aW9uLWRhbnMtbGVzLXNhbGxlcy1kZS1jaW5lbWEiLCJvcHRpb25zIjp7ImRpc2p1bmN0aXZlLmFubmVlIjp0cnVlfX19XSwidGltZXNjYWxlIjoiIiwiZGlzcGxheUxlZ2VuZCI6dHJ1ZSwiYWxpZ25Nb250aCI6dHJ1ZX0%3D&static=false&datasetcard=false\"\n        width=\"400\"\n        height=\"300\"\n        frameborder=\"0\"\n      ></iframe>*/}\n      </div>\n    );\n  }\n}\n\nexport default Chart1;\n"]},"metadata":{},"sourceType":"module"}